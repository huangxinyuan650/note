## 网络知识
### TCP、UDP
#### TCP介绍
- 优点：稳定、可靠（三次握手、数据传递时有确认、窗口、重传、拥塞控制机制）
- 缺点：慢、效率低，占用资源高、易被攻击

##### 重传机制
- 超时重传：设定超时阈值，当发送数据包丢失或确认应答丢失时都触发超时重传，超时时间加倍
- 快重传：当收到三个相同ack报文时会在定时器过期前触发快重传

#### UDP介绍
- 优点：快（无状态协议）、比TCP稍安全
- 缺点：不可靠、不稳定

#### TCP与UDP的区别
1、TCP面向连接（三次握手）、UDP是无连接
2、TCP提供可靠服务（无差错、不丢失、不重复、按需到达）、UDP尽力交付不保证可靠交付
3、TCP面向字节流（将数据看成一串无结构字节流）、UDP面向报文（无拥塞，不会因为网络问题而调整发包速率，适用视频通话等）
4、TCP连接为点对点、UDP连接可以为一对一、一对多、多对多
5、TCP首部开销20字节、UDP首部开销8字节
6、TCP通信信道为全双工可靠信道、UDP为不可靠信道

#### 使用UDP实现TCP
1、增加seq/ack机制从而确保数据发送成功
2、增加发送和接收缓冲区来支持超时重传
3、增加超时重传机制

### 流量控制（发送方发送速率不要太快）
#### 窗口滑动实现流量控制（接收到ack后移动窗口）
数据接收方告知发送方可接收数据窗口大小，发送方依次发送窗口大小的数据，
在数据传输的过程中数据接收方在接收到数据后会发送一个ack(接收到的数据的游标、调整窗口大小的新值)给发送方，
发送方在收到ack和新窗口（非必须）后移动窗口（有新窗口大小的需调整窗口大小）继续发送新的数据，同时删除缓冲区中已发送成功数据

### 拥塞控制
#### 慢启动
当窗口小于慢启动门限(ssthresh)，没收到一个ack窗口乘2（指数增长），当窗口大于慢启动门限时则使用拥塞避免算法（线性增长）
#### 拥塞避免
收到一个ack，窗口增加 1/窗口大小。当增长到一定值，出现拥塞导致丢包触发重传机制，使用拥塞发生算法
#### 拥塞发生
- 超时重传：慢启动门限(ssthresh)变为窗口大小/2，窗口大小变为1。（过分激进）
- 快重传：窗口大小变为原来的一半，慢启动门限(ssthresh)变为窗口大小
进去快速恢复
#### 快速恢复
窗口大小变为原窗口大小+3（3是确认有3个数据包收到了），重传丢失数据包，若收到重复的ack则将窗口大小加1，进入拥塞避免算法